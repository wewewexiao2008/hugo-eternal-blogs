# Automatic Translation Workflow\n\nThis Hugo site uses GitHub Actions to automatically translate content between English and Simplified Chinese.\n\n## How It Works\n\n1. **Write Content**: Create markdown files in either `content/en/posts/` (English) or `content/zh-cn/posts/` (Chinese)\n2. **Push to Main**: Commit and push to the main branch\n3. **Auto-Translation**: GitHub Actions automatically:\n   - Detects the source language\n   - Translates content using Gemini API\n   - Creates a corresponding file in the target language\n   - Commits the translation back to the repository\n4. **Deploy**: The site is automatically built and deployed to GitHub Pages\n\n## File Structure\n\n- `scripts/translate_content.py` - Python script that handles translation\n- `.github/workflows/translate.yml` - GitHub Actions workflow configuration\n- `content/en/posts/` - English language posts\n- `content/zh-cn/posts/` - Simplified Chinese language posts\n\n## Writing Content\n\n### English Post\n\nCreate a file like `content/en/posts/my-post.md`:\n\n```markdown\n---\ntitle: \"My Article Title\"\ndate: 2025-12-20T10:00:00Z\ndescription: \"A brief description\"\ntags: [\"tag1\", \"tag2\"]\n---\n\n## Introduction\n\nYour content here...\n```\n\n### Chinese Post\n\nCreate a file like `content/zh-cn/posts/my-post.md`:\n\n```markdown\n---\ntitle: \"我的文章标题\"\ndate: 2025-12-20T10:00:00Z\ndescription: \"简要描述\"\ntags: [\"标签1\", \"标签2\"]\n---\n\n## 介绍\n\n你的内容...\n```\n\n## What Gets Translated\n\n- ✅ Main content body\n- ✅ Title (frontmatter)\n- ✅ Description (frontmatter)\n- ✅ Code blocks are preserved\n- ✅ Markdown formatting is preserved\n- ✅ HTML tags are preserved\n\n## Workflow Trigger\n\nThe workflow automatically runs when:\n- Any markdown file in `content/` is modified\n- You manually trigger it via GitHub Actions UI\n\n## Local Testing\n\nYou can test the translation script locally:\n\n```bash\n# Install dependencies\npip install requests python-frontmatter langdetect\n\n# Set environment variables\nexport GEMINI_API_KEY=\"your-api-key\"\nexport GEMINI_ENDPOINT=\"https://aihubmix.com/v1/chat/completions\"\n\n# Run the script\npython scripts/translate_content.py\n```\n\n## GitHub Secrets Configuration\n\nMake sure these secrets are configured in your GitHub repository:\n\n1. **GEMINI_API_KEY** - Your API key for the translation service\n2. **GEMINI_ENDPOINT** - The API endpoint URL\n\nSee `.github/workflows/translate.yml` for how they're used.\n\n## Troubleshooting\n\n### Translation Failed\n\nIf the workflow fails:\n1. Check GitHub Actions logs\n2. Verify API key and endpoint are correct\n3. Ensure content files are valid markdown\n4. Check for API rate limits\n\n### Duplicate Files\n\nIf duplicate translated files are created:\n1. The script skips files that already have language suffixes\n2. Delete any unwanted translations manually\n3. Push the deletion to the repository\n\n### Manual Re-run\n\nTo manually trigger the workflow:\n1. Go to GitHub Actions\n2. Select \"Auto-translate Hugo content\"\n3. Click \"Run workflow\"\n\n## Example Workflow\n\n1. Write a new post in English: `content/en/posts/my-new-post.md`\n2. Push to main branch\n3. GitHub Actions automatically creates `content/en/posts/my-new-post.zh-cn.md` with Chinese translation\n4. Site builds and deploys with both language versions\n5. Users can switch between English and Chinese using the language selector\n\n## Notes\n\n- The workflow uses the Gemini 2 Flash Preview model for fast, cost-effective translation\n- Translated content is committed back to the repository with `continue-on-error: true` to prevent failures\n- Always review automatically translated content for accuracy\n- For technical terms or specialized content, you may want to manually refine translations\n"}}}